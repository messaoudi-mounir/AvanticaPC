<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:cache="http://www.springframework.org/schema/cache"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:core="http://activemq.apache.org/schema/core" xmlns:ra="http://activemq.apache.org/schema/ra"
	xmlns:task="http://www.springframework.org/schema/task" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:util="http://www.springframework.org/schema/util" xmlns:c="http://www.springframework.org/schema/c"
	xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.3.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd
		http://activemq.apache.org/schema/core http://activemq.org/config/1.0/1.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.3.xsd
		http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-4.3.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.3.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd
		http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-4.3.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd
		http://activemq.apache.org/schema/ra http://activemq.apache.org/schema/ra/activemq-ra.xsd">


	<bean id="engine" scope="singleton" class="com.smartnow.engine.Engine" factory-method="getInstance" lazy-init="true"/>

	<bean id="schedulerService" scope="singleton" class="com.smartnow.engine.scheduler.service.SchedulerService" factory-bean="engine" factory-method="getEngineService" lazy-init="true">
		<constructor-arg index="0" value="Scheduler"/>
	</bean>
	
	<bean id="alertService" scope="singleton" class="com.petrolink.mbe.alertstatus.impl.AlertsService" factory-bean="engine" factory-method="getEngineService" lazy-init="true">
		<constructor-arg index="0" value="alertStatusTableService"/>
		<property name="SchedulerService" ref="schedulerService"></property>
	</bean>
	

	<bean id="alert" scope="prototype" class="com.petrolink.mbe.alertstatus.impl.AlertImpl" />
	
	<bean id="alertsDAO" scope="singleton" class="com.petrolink.mbe.alertstatus.impl.AlertsDAO" lazy-init="true">
		<property name="Service" ref="alertService"></property>
		<property name="SchedulerService" ref="schedulerService"></property>
	</bean>

	<bean id="petrolinkListener" scope="singleton" class="com.smartnow.alertstatus.impl.InvokeFlowAlertListener" />
	<bean id="ruleFlowAlertListener" scope="singleton" class="com.petrolink.mbe.alertstatus.impl.RuleFlowAlertListener" />
	<bean id="alertTemplate" scope="prototype" class="com.petrolink.mbe.alertstatus.impl.AlertTemplateImpl" />
	
</beans>
